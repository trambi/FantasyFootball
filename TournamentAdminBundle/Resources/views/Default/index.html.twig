{% extends "::base.html.twig" %}

{% block title %}Administration &eacute;dition {{edition}} - tour : {{round}}{% endblock %}

{% block body %}
<h1>Administration &eacute;dition {{edition}} - tour : {{round}}</h1>
{% if 0 == round %}
<h2>Coachs ({{ coachs|length }})</h2>
<ul>
{% for coach in coachs %}
	<li>{{coach.getName()}} - {{coach.getNafNumber()}}
            {% if coach.getReady() %}<a href="{{ path('_unready_coach',{'coachId':coach.getId()} )  }}" >Pr&ecirc;t</a>
            {% else %}<a href="{{ path('_ready_coach',{'coachId':coach.getId()} )  }}" >Pas pr&ecirc;t</a>{% endif %} 
            <a href="{{ path('_view_coach',{'coachId':coach.getId()} )  }}" >Voir</a>
            <a href="{{ path('_delete_coach',{'coachId':coach.getId()} )  }}" >Supprimer</a>
            <a href="{{ path('_modify_coach',{'coachId':coach.id} )  }}" >Modifier</a></li>
{% endfor %}
</ul>
<h2>Triplettes ({{ coachTeams|length }})</h2>
<ul>
{% for coachTeam in coachTeams %}
	<li>{{coachTeam.getName() }} 
{% if coachTeam.getCoachs() %} - 
{% for innerCoach in coachTeam.getCoachs() %}
    {% if loop.last %} et {% else %}{% if loop.first == false %}, {% endif %}{% endif %}{{ innerCoach.getName() }}
{% endfor %}
{% endif %}
            <a href="{{ path('_view_coach_team',{'coachTeamId':coachTeam.getId()} )  }}" >Voir</a>
            <a href="{{ path('_delete_coach_team',{'coachTeamId':coachTeam.getId()} )  }}" >Supprimer</a>
            <a href="{{ path('_modify_coach_team',{'coachTeamId':coachTeam.getId()} )  }}" >Modifier</a></li>
{% endfor %}
</ul>
<a href="{{ path('_add_coach',{'edition':edition} )  }}" >Ajouter un coach</a>
<a href="{{ path('_add_coach_team',{'edition':edition} )  }}" >Ajouter une triplette</a>
<a href="{{ path('_load_coach_team',{'edition':edition} ) }}">Charger le fichier</a>
{% else %}
{% if matchesToPlay %}
<h2>Matchs &agrave; jouer</h2>

<dl>
{% for match in matchesToPlay %}
    <dt>&nbsp;</dt>
    <dd><a href="{{ path('_view_coach',{'coachId':match.teamId1} )  }}" >{{match.coach1}}</a>
	 vs <a href="{{ path('_view_coach',{'coachId':match.teamId2} ) }}" >{{match.coach2}}</a>
    </dd>
{% endfor %}
</dl>
{% endif %}
{% if playedMatches %}
<h2>Matchs jou&eacute;s</h2>
<dl>
{% for match in playedMatches %}
    <dt>Table {{match.table}} :</dt> 
    <dd><a href="{{ path('_view_coach',{'coachId':match.teamId1} ) }}" >{{match.coach1}}</a>
            ({{match.casualties1}} sorties et {{match.points1}} points ) {{match.td1}}
	 vs {{match.td2}} <a href="{{ path('_view_coach',{'coachId':match.teamId2} )  }}" >{{match.coach2}}</a>
	({{match.casualties2}} sorties et {{match.points2}} points ) </dd>
{% endfor %}
</dl>
{% endif %}
{% endif %}
<a href="{{ path('_next_round',{'edition':edition} )  }}" >Générer la prochaine ronde</a>
{% endblock %}

